<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>spyne - Tame the interwebs</title>

    <link rel="stylesheet" href="css/styles.css">
    <script src="assets/scale.fix.js"></script>
    <script src="assets/jquery-1.8.2.min.js"></script>

    <script src="assets/jquery.snippet.min.js"></script>
    <script type="text/javascript">

$(document).ready(function(){
    var hide_imports = true;

    $("input.chk_param").click(function(e) {
        regen_code(hide_imports);
    });

    var gen_imports = [
         "from spyne.application import Application"
        ,"from spyne.decorator import srpc"
        ,"from spyne.service import ServiceBase"
        ,"from spyne.model.complex import Array"
        ,"from spyne.model.primitive import Integer"
        ,"from spyne.model.primitive import String"
    ].join("\n")

    var prot_imports = {
         HttpRpc: "from spyne.protocol.http import HttpRpc"
        ,XmlDocument: "from spyne.protocol.xml import XmlDocument"
        ,Soap11: "from spyne.protocol.soap import Soap11"
        ,JsonDocument: "from spyne.protocol.json import JsonDocument"
        ,MessagePackDocument: "from spyne.protocol.msgpack import MessagePackDocument"
        ,MessagePackRpc: "from spyne.protocol.msgpack import MessagePackRpc"
        ,Csv: "from spyne.protocol.csv import Csv"
        ,HtmlRowTable: "from spyne.protocol.html import HtmlRowTable"
        ,HtmlColumnTable: "from spyne.protocol.html import HtmlColumnTable"
        ,HtmlMicroMormat: "from spyne.protocol.html import HtmlMicroMormat"
    };

    // TODO: Fill this up.
    var prot_client = {
        HttpRpc: ["$ curl http://localhost:7789/say_hello?name=World&amp;times=4"]
    }

    var prot_response = {
        JsonDocument: ['{',
            ,'    "say_helloResponse": {'
            ,'        "say_helloResult": {'
            ,'            "string": ['
            ,'                "Hello, World",'
            ,'                "Hello, World",'
            ,'                "Hello, World",'
            ,'                "Hello, World"'
            ,'            ]'
            ,'        }'
            ,'    }'
            ,'}']
        ,Soap11: ["<?xml version='1.0' encoding='utf-8'?>",
            ,'<senv:Envelope xmlns:wsa="http://schemas.xmlsoap.org/ws/2003/03/addressing"'
            ,'xmlns:tns="spyne.examples.hello"'
            ,'xmlns:plink="http://schemas.xmlsoap.org/ws/2003/05/partner-link/"'
            ,'xmlns:xop="http://www.w3.org/2004/08/xop/include"'
            ,'xmlns:senc="http://schemas.xmlsoap.org/soap/encoding/"'
            ,'xmlns:s12env="http://www.w3.org/2003/05/soap-envelope/"'
            ,'xmlns:s12enc="http://www.w3.org/2003/05/soap-encoding/"'
            ,'xmlns:xs="http://www.w3.org/2001/XMLSchema"'
            ,'xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"'
            ,'xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'
            ,'xmlns:senv="http://schemas.xmlsoap.org/soap/envelope/"'
            ,'xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">'
            ,'  <senv:Body>'
            ,'    <tns:say_helloResponse>'
            ,'      <tns:say_helloResult>'
            ,'        <tns:string>Hello, World</tns:string>'
            ,'        <tns:string>Hello, World</tns:string>'
            ,'        <tns:string>Hello, World</tns:string>'
            ,'        <tns:string>Hello, World</tns:string>'
            ,'      </tns:say_helloResult>'
            ,'    </tns:say_helloResponse>'
            ,'  </senv:Body>'
            ,'</senv:Envelope>'
        ]
    }

    var tpt_imports = {
         WsgiApplication: ["from spyne.server.wsgi import WsgiApplication"]
        ,TwistedWebResource: [
            "from spyne.server.twisted import TwistedWebResource"
            ,""
            ,"from twisted.internet import reactor"
            ,"from twisted.web.server import Site"
        ]
        ,DjangoApplication: [
             "from spyne.server.django import DjangoApplication"
            ,""
            ,"from django.views.decorators.csrf import csrf_exempt"
        ]
        ,PyramidApplication: [
             "from spyne.server.pyramid import PyramidApplication"
            ,""
            ,"from pyramid.config import Configurator"
            ,"from pyramid.view import view_config"
            ,""
            ,"from wsgiref.simple_server import make_server"
        ]
        ,ZeroMQServer: ["from spyne.server.zeromq import ZeroMQServer"]
    }

    var tpt_example = {
         WsgiApplication: ["helloworld_http.py"]
        ,TwistedWebResource: ["twisted"]
        ,DjangoApplication: ["django"]
        ,PyramidApplication: ["pyramid"]
        ,ZeroMQServer: ["zeromq.py"]
    }

    var tpt_code = {
        WsgiApplication: [
             "if __name__=='__main__':"
            ,"    # You can use any Wsgi server. Here we choose Python's built-in "
            ,"    # wsgi server. Don't use this in production."
            ,"    from wsgiref.simple_server import make_server"
            ,""
            ,"    wsgi_app = WsgiApplication(application)"
            ,"    server = make_server('0.0.0.0', 7789, wsgi_app)"
            ,"    server.serve_forever()"
        ]
        ,ZeroMQServer: [
             "if __name__=='__main__':"
            ,"    wsgi_app = ZeroMQServer(application,"
            ,"                           'tcp://0.0.0.0:5555')"
            ,"    server.serve_forever()"
        ]
        ,TwistedWebResource: [
             "if __name__=='__main__':"
            ,"    resource = TwistedWebResource(application)"
            ,"    site = Site(resource)"
            ,""
            ,"    reactor.listenTCP(7789, site, interface='0.0.0.0')"
        ]
        ,DjangoApplication: [
             "# This module resides in a package in your Django project."
            ,""
            ,"hello_app = csrf_exempt(DjangoApplication(application))"
            ,""
            ,"# hello_app here has to be put in a package that is"
            ,"# listed in the INSTALLED_APPS list in your settings.py"
            ,"# and referenced in the url.py under an appropriate"
            ,"# regexp entry."
        ]
        ,PyramidApplication: [
             "if __name__ == '__main__':"
            ,"    app = PyramidApplication(application)"
            ,"    pyramid_app = view_config(route_name='home')(application)"
            ,"    settings = {}"
            ,"    settings['debug_all'] = True"
            ,"    config = Configurator(settings=settings)"
            ,"    config.add_route('home', '/')"
            ,"    config.scan()"
            ,""
            ,"    app = config.make_wsgi_app()"
            ,"    server = make_server('0.0.0.0', 7789, app)"
            ,"    server.serve_forever()"
        ]
    }
    function regen_code(hide_imports) {
        var version = $("span#version").html();

        var inprot = $('input[name=inprot]:checked').val();
        var outprot = $('input[name=outprot]:checked').val();
        var tpt = $('input[name=tpt]:checked').val();
        var validation = $('input[name=validation]:checked').val();

        if (validation == "true") {
            if (inprot == "Soap11") {
                validation = 'validator="lxml"';
            }
            else {
                validation = 'validator="soft"';
            }
        }

        var retval = [];

        if (! hide_imports) {
            retval.push(gen_imports);
            retval.push("")

            // protocol imports
            retval.push(prot_imports[inprot]);
            if (inprot != outprot) {
                retval.push(prot_imports[outprot]);
            }
            retval.push("");

            // transport imports
            retval = retval.concat(tpt_imports[tpt]);
            retval.push("");
        }

        retval.push("class HelloWorldService(ServiceBase):");
        retval.push("    @srpc(String, Integer, _returns=Array(String))");
        retval.push("    def say_hello(name, times):");
        retval.push("        for i in range(times):");
        retval.push("            yield 'Hello, %s' % name");

        retval.push("");

        retval.push("application = Application([HelloWorldService],");
        retval.push("    tns='spyne.examples.hello',");
        retval.push("    in_protocol="+ inprot +"(" + validation + "),");
        retval.push("    out_protocol="+ outprot +"()");
        retval.push(")");

        retval.push("");

        if (tpt_code[tpt]) {
            retval = retval.concat(tpt_code[tpt]);
        }
        else {
            retval.push("# Please write an example for this transport and ");
            retval.push("# send a pull request ");
        }

        $("div.code").html([
             '<div>'
            ,  '<a id="toggle_imports">Show Imports</a>'
            ,  ' | '
            ,  '<span class="code_link"></span>'
            ,'</div>'
            ,'<pre />'
        ].join(''));

        var shi = $("#toggle_imports");
        shi.click(function(e) {
            if (hide_imports) {
                hide_imports = false;
                shi.html("Hide Imports");
                regen_code(hide_imports);
            }
            else {
                hide_imports = true;
                shi.html("Show Imports");
                regen_code(true);
            }
        });

        var example_url = tpt_example[tpt];

        $("span.code_link").html(
                "<a target=\"_blank\" href=\"https://github.com/arskom/spyne/tree/spyne-" + version +
                "/examples/"+example_url+"\">A "+tpt+" Example</a>"
        );

        $("pre").html(retval.join("\n"));
        $("pre").snippet("python", {
             style:"whitengrey"
            ,clipboard:"assets/ZeroClipboard.swf"
        });

        $("div.code").append('Client Code: <pre id="client"/>');

        if (prot_client[inprot]) {
            $("pre#client").text(prot_client[inprot].join("\n"));
        }
        else {
            $("pre#client").text("Add this client code and send a pull request!");
        }

        $("div.code").append('Response Document: <pre id="response"/>');
        if (prot_response[outprot]) {
            $("pre#response").text(prot_response[outprot].join("\n"));
        }
        else{
            $("pre#response").text("Add this server response document and send a pull request!");
        }
    }
    regen_code(hide_imports);
});
    </script>

    <!--<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> -->
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>

<div class="wrapper">
<header>
    <h1 class="header">spyne</h1>
    <small>Tame the interwebs.</small>
        
    <p class="header"><span style="font-weight: bold">Latest release:</b> <br/>
        Spyne <span id="version">2.9.1</span> <br />
        Oct. 29th, 2012 <br />
        <img src="https://secure.travis-ci.org/arskom/spyne.png">
    </p>

    <ul>
        <li class="download"><a class="buttons" href="https://github.com/arskom/spyne/tarball/spyne-2.9.1">Download</a></li>
        <li class="download"><a class="docs" href="docs/index.html">Docs</a></li>
        <li class="buttons"><a class="blog" href="blog/index.html">Blog</a></li>
        <li><a class="buttons github" href="https://github.com/arskom/spyne">GitHub</a></li>
    </ul>

</header>

<section class="what_is">
    <h1>What is Spyne?</h1>

    <p class="text">Spyne is a Python RPC toolkit that makes it easy to expose online services
        that have a well-defined API using multiple protocols and transports.</p>

    <p>It integrates with popular Python web frameworks as well as libraries like
        <a href="https://github.com/arskom/spyne/blob/spyne-2.9.1/examples/user_manager/server_sqlalchemy.py>SQLAlchemy</a>
        to keep your code as
        <a href="http://c2.com/cgi/wiki?DontRepeatYourself">DRY</a> as possible.</p>

    <p>See the <a href="docs/index.html">documentation</a> for more information.</p>

    <h1>Getting Started</h1>

    <div class="hello_world">
        <div id="parameters">
            <form action="#" method="foo">
                <fieldset>
                    <legend>Input Protocol</legend>
                    <label><input class="chk_param" type="radio" name="inprot" value="HttpRpc" checked> HttpRpc</label> <br/>
                    <label><input class="chk_param" type="radio" name="inprot" value="JsonDocument" > Json Document</label>  <br/>
                    <label><input class="chk_param" type="radio" name="inprot" value="Soap11"> Soap 1.1</label>  <br/>
                    <label><input class="chk_param" type="radio" name="inprot" value="XmlDocument"> Xml Document</label>  <br/>
                    <label><input class="chk_param" type="radio" name="inprot" value="MessagePackDocument"> MessagePack Document</label>  <br/>
                    <label><input class="chk_param" type="radio" name="inprot" value="MessagePackRpc"> MessagePack RPC</label>  <br/>
                </fieldset>

                <fieldset>
                    <legend>Output Protocol</legend>
                    <label><input class="chk_param" type="radio" name="outprot" value="JsonDocument" checked/> Json Document</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="Soap11" /> Soap 1.1</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="XmlDocument" /> Xml Document</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="MessagePackDocument" /> MessagePack Document</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="MessagePackRpc" /> MessagePack RPC</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="Csv" />Comma Separated Values</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="HtmlRowTable" />Html Row Table</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="HtmlColumnTable" />Html Column Table</label>  <br/>
                    <label><input class="chk_param" type="radio" name="outprot" value="HtmlMicroMormat" />Html MicroFormat</label>  <br/>
                </fieldset>

                <fieldset>
                    <legend>Transport</legend>
                    <label><input class="chk_param" type="radio" name="tpt" value="WsgiApplication" checked> Http (WSGI)</label> <br/>
                    <label><input class="chk_param" type="radio" name="tpt" value="TwistedWebResource" /> Http (Twisted)</label>  <br/>
                    <label><input class="chk_param" type="radio" name="tpt" value="DjangoApplication" /> Http (Django)</label> <br/>
                    <label><input class="chk_param" type="radio" name="tpt" value="PyramidApplication" /> Http (Pyramid)</label> <br/>
                    <label><input class="chk_param" type="radio" name="tpt" value="ZeroMQServer" /> ZeroMQ</label> <br/>
                </fieldset>
                <fieldset>
                    <legend>Validation:</legend>
                    <label><input class="chk_param" type="radio" name="validation" value="true" checked> Enabled</label> <br/>
                    <label><input class="chk_param" type="radio" name="validation" value="" checked> Disabled</label> <br/>
                </fieldset>
            </form>
        </div>
        <div class="code"></div>
    </div>
</section>
</div>
<footer style="align: center;">
    <p>&copy; All content on this web site copyright <a href="http://arskom.com.tr">Arskom Ltd.</a></p>
    <p><small>Hosted on <a href="https://pages.github.com">
                GitHub Pages</a> using a variation of the Dinky theme.

    Please use the
    <a href="http://github.com/spyne/spyne.github.com/issues">issue tracker</a>
            at Github for ideas on improving this web site.</small></p>
</footer>
<!--[if !IE]><script>fixScale(document);</script><![endif]-->
</body>
</html>
